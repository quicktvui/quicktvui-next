import{o as s,c as a,a as t}from"./app.db97d03c.js";var p="/sdk/light-card.mp4",o="/sdk/combined.mp4";const i='{"title":"\u8F7B\u5361","description":"","frontmatter":{"title":"\u8F7B\u5361","lang":"zh-CN"},"headers":[{"level":2,"title":"\u6DF7\u5408\u5F00\u53D1","slug":"\u6DF7\u5408\u5F00\u53D1"},{"level":2,"title":"\u793A\u4F8B\u4EE3\u7801","slug":"\u793A\u4F8B\u4EE3\u7801"},{"level":3,"title":"1. \u7B80\u5355\u4F7F\u7528","slug":"_1-\u7B80\u5355\u4F7F\u7528"},{"level":3,"title":"2. \u5728RecyclerView\u4E2D\u4F7F\u7528","slug":"_2-\u5728recyclerview\u4E2D\u4F7F\u7528"}],"relativePath":"zh-CN/sdk/light-card.md","lastUpdated":1746602666000}',e={},k=Object.assign(e,{__name:"light-card",setup(c){return(u,n)=>(s(),a("div",null,n[0]||(n[0]=[t('<p>\u653E\u4E0B\u8F7Dapk\u548C\u9879\u76EE\u6E90\u7801</p><h1 id="\u8F7B\u5361" tabindex="-1">\u8F7B\u5361 <a class="header-anchor vp-link" href="#\u8F7B\u5361" aria-hidden="true">#</a></h1><p>\u5FEB\u5E94\u7528\u8F7B\u5361\u662F\u4E13\u4E3A\u539F\u751F\u5E94\u7528\u4E0E\u5FEB\u5E94\u7528\u6DF7\u5408\u5F00\u53D1\u7684\u89E3\u51B3\u65B9\u6848\u3002\u8F7B\u5361\u7531JSView\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u5C06\u5176\u5D4C\u5165\u5230\u4EFB\u610F\u5927\u5C0F\u3001\u4EFB\u610F\u4F4D\u7F6E\u7684\u5B89\u5353ViewGroup\u5F53\u4E2D\u3002\u5728\u4E3A\u539F\u751F\u5E94\u7528\u6DFB\u52A0\u52A8\u6001\u5316\u80FD\u529B\u7684\u540C\u65F6\uFF0C\u5B9E\u73B0\u4E86\u4E0E\u539F\u751F\u5E94\u7528\u7684\u4E00\u81F4\u4F53\u9A8C\u3002</p><video width="80%" src="'+p+'" controls autoplay muted loop></video><p>\u5982\u4E0A\u6240\u793A\uFF0C\u6574\u4E2A\u754C\u9762\u662F\u5B89\u5353\u539F\u751F\u5F00\u53D1\uFF0C<code>Js\u8F7B\u5361</code> \u3001 <code>JsFragment</code>\u4EE5\u53CA<code>\u8F7B\u5361\u5F39\u7A97</code>\u91CC\u7684\u754C\u9762\u662Fvue\u5F00\u53D1\u3002</p><br><br><h2 id="\u6DF7\u5408\u5F00\u53D1" tabindex="-1">\u6DF7\u5408\u5F00\u53D1 <a class="header-anchor vp-link" href="#\u6DF7\u5408\u5F00\u53D1" aria-hidden="true">#</a></h2><video width="80%" src="'+o+`" controls muted></video><h2 id="\u793A\u4F8B\u4EE3\u7801" tabindex="-1">\u793A\u4F8B\u4EE3\u7801 <a class="header-anchor vp-link" href="#\u793A\u4F8B\u4EE3\u7801" aria-hidden="true">#</a></h2><h3 id="_1-\u7B80\u5355\u4F7F\u7528" tabindex="-1">1. \u7B80\u5355\u4F7F\u7528 <a class="header-anchor vp-link" href="#_1-\u7B80\u5355\u4F7F\u7528" aria-hidden="true">#</a></h3><div class="language-java"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u7B2C\u4E00\u6B65. \u8BBE\u7F6E\u52A0\u8F7D\u53C2\u6570</span>
        <span class="token class-name">EsData</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        data<span class="token punctuation">.</span><span class="token function">setAppPackage</span><span class="token punctuation">(</span><span class="token string">&quot;\u8F7B\u5361\u5E94\u7528\u7684\u5305\u540D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u7B2C\u4E8C\u6B65. \u52A0\u8F7D\u8F7B\u5361\u5E94\u7528</span>
        <span class="token class-name">JsSlotViewManager</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attachToActivity</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u7B2C\u4E09\u6B65. \u521B\u5EFA\u8F7B\u5361</span>
        <span class="token class-name">JsSlotView</span> jsView <span class="token operator">=</span> <span class="token class-name">JsSlotViewManager</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createJSView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;weather&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        findViewById<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ViewGroup</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>jsview_container<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span>jsView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5378\u8F7D\u8F7B\u5361\u5E94\u7528</span>
        <span class="token class-name">JsSlotViewManager</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">detachFromActivity</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_2-\u5728recyclerview\u4E2D\u4F7F\u7528" tabindex="-1">2. \u5728RecyclerView\u4E2D\u4F7F\u7528 <a class="header-anchor vp-link" href="#_2-\u5728recyclerview\u4E2D\u4F7F\u7528" aria-hidden="true">#</a></h3><div class="language-java"><pre><code><span class="token class-name">RecyclerView</span> rv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RecyclerView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rv<span class="token punctuation">.</span><span class="token function">setLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinearLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rv<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JsViewAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setContentView</span><span class="token punctuation">(</span>rv<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">JsViewAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>Adapter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">JsViewAdapter<span class="token punctuation">.</span>ViewHolder</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> mViewIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token string">&quot;weather&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clock&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;qlist&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Context</span> mContext<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">JsViewAdapter</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mContext <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getItemCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mViewIds<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@NonNull</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ViewHolder</span> <span class="token function">onCreateViewHolder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">ViewGroup</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> viewType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ViewHolder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FrameLayout</span><span class="token punctuation">(</span>mContext<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBindViewHolder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">ViewHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>holder<span class="token punctuation">.</span>jsView <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">JsSlotView</span> jsView <span class="token operator">=</span> <span class="token class-name">JsSlotViewManager</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createJSView</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> mViewIds<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ViewGroup</span><span class="token punctuation">)</span>holder<span class="token punctuation">.</span>itemView<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span>jsView<span class="token punctuation">)</span><span class="token punctuation">;</span>
            holder<span class="token punctuation">.</span>jsView <span class="token operator">=</span> jsView<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        holder<span class="token punctuation">.</span>jsView<span class="token punctuation">.</span><span class="token function">getRecyclerViewEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">onBindViewHolder</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token string">&quot;\u4F20\u9012\u6570\u636E\u5230Vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onViewAttachedToWindow</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">ViewHolder</span> holder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onViewAttachedToWindow</span><span class="token punctuation">(</span>holder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        holder<span class="token punctuation">.</span>jsView<span class="token punctuation">.</span><span class="token function">getRecyclerViewEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">onViewAttachedToWindow</span><span class="token punctuation">(</span>holder<span class="token punctuation">.</span><span class="token function">getAdapterPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onViewDetachedFromWindow</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">ViewHolder</span> holder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onViewDetachedFromWindow</span><span class="token punctuation">(</span>holder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        holder<span class="token punctuation">.</span>jsView<span class="token punctuation">.</span><span class="token function">getRecyclerViewEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">onViewDetachedFromWindow</span><span class="token punctuation">(</span>holder<span class="token punctuation">.</span><span class="token function">getAdapterPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onViewRecycled</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">ViewHolder</span> holder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onViewRecycled</span><span class="token punctuation">(</span>holder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        holder<span class="token punctuation">.</span>jsView<span class="token punctuation">.</span><span class="token function">getRecyclerViewEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">onViewRecycled</span><span class="token punctuation">(</span>holder<span class="token punctuation">.</span><span class="token function">getAdapterPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">ViewHolder</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ViewHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">JsSlotView</span> jsView<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">ViewHolder</span><span class="token punctuation">(</span><span class="token class-name">View</span> itemView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>itemView<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>`,14)])))}});export{i as __pageData,k as default};
